/**
 * It is the admin script asset.
 *
 * @package woorestaurant
 */

! (function (r) {
	"use strict";
	r( document ).ready(
		function () {
			var e, d;

			function t(e) {
				var t = r( e.target ),
					o = "name";
				- 1 !== e.target.id.indexOf( o, e.target.id.length - o.length ) &&
					t
				.parents( ".wrmb-row.wrmb-repeatable-grouping" )
				.find( ".wrmb-group-title" )
				.text( t.val() );
			}

			function p(e) {
				e = e.split( ":" );
				return 60 * Number( e[0] ) + Number( e[1] );
			}
			r( "#toplevel_page_woo_restaurant_options" ).appendTo(
				"#menu-posts-product > ul"
			),
			(r( "#toplevel_page_woo_restaurant_options > a" ).hasClass( "current" ) ||
			r( "#toplevel_page_woo_restaurant_advanced_options > a" ).hasClass(
				"current"
			) ||
			r( "#toplevel_page_woo_restaurant_shpping_options > a" ).hasClass(
				"current"
			) ||
			r( "#toplevel_page_woo_restaurant_custom_code_options > a" ).hasClass(
				"current"
			) ||
			r( "#toplevel_page_woo_restaurant_js_css_file_options > a" ).hasClass(
				"current"
			)) &&
			(r( "#adminmenu > li#menu-posts-product" ).removeClass(
				"wp-not-current-submenu"
			),
			r( "#adminmenu > li#menu-posts-product" ).addClass(
				"wp-has-current-submenu"
			),
			r( "#toplevel_page_woo_restaurant_options" ).addClass( "current" )),
			0 <
			jQuery(
				'.post-type-woorestaurant_scbd .wrmb2-metabox select[name="sc_type"]'
			).length &&
			("" ==
			(e = jQuery(
				'.post-type-woorestaurant_scbd .wrmb2-metabox select[name="sc_type"]'
			).val()) && (e = "grid"),
			"list" == e
			? (jQuery( ".post-type-woorestaurant_scbd select#style option" ).attr(
				"disabled",
				"disabled"
			),
			jQuery(
				'.post-type-woorestaurant_scbd select#style option[value="1"], .post-type-woorestaurant_scbd select#style option[value="2"], .post-type-woorestaurant_scbd select#style option[value="3"]'
			).removeAttr( "disabled" ))
			: "table" == e
			? (jQuery( ".post-type-woorestaurant_scbd select#style option" ).attr(
				"disabled",
				"disabled"
			),
			jQuery(
				'.post-type-woorestaurant_scbd select#style option[value="1"]'
			).removeAttr( "disabled" ))
			: jQuery(
				".post-type-woorestaurant_scbd select#style option"
			).removeAttr( "disabled", "disabled" ),
			r( "body" ).removeClass(
				function (e, t) {
					return (t.match( /(^|\s)wrs-layout\S+/g ) || []).join( " " );
				}
			),
			r( "body" ).addClass( "wrs-layout-" + e )),
			jQuery(
				'.post-type-woorestaurant_scbd .wrmb2-metabox select[name="sc_type"]'
			).on(
				"change",
				function () {
					var e = r( this ).val();
					"" == e && (e = "grid"),
					"list" == e
					? (jQuery( ".post-type-woorestaurant_scbd select#style option" ).attr(
						"disabled",
						"disabled"
					),
					jQuery(
						'.post-type-woorestaurant_scbd select#style option[value="1"], .post-type-woorestaurant_scbd select#style option[value="2"], .post-type-woorestaurant_scbd select#style option[value="3"]'
					).removeAttr( "disabled" ))
					: "table" == e
					? (jQuery( ".post-type-woorestaurant_scbd select#style option" ).attr(
						"disabled",
						"disabled"
					),
					jQuery(
						'.post-type-woorestaurant_scbd select#style option[value="1"]'
					).removeAttr( "disabled" ))
					: jQuery(
						".post-type-woorestaurant_scbd select#style option"
					).removeAttr( "disabled", "disabled" ),
					r( "body" ).removeClass(
						function (e, t) {
							return (t.match( /(^|\s)wrs-layout\S+/g ) || []).join( " " );
						}
					),
					r( "body" ).addClass( "wrs-layout-" + e );
				}
			),
			jQuery( 'input[name="woo_restaurant_order"]' ).on(
				"change",
				function () {
					var e = r( this ),
					e     = {
						action: "woo_restaurant_change_sort_food",
						post_id: e.attr( "data-id" ),
						value: e.val(),
					};
					r.ajax(
						{
							type: "post",
							url: woo_restaurant_ajax.ajaxurl,
							dataType: "html",
							data: e,
							success: function (e) {
								return ! 0;
							},
						}
					);
				}
			),
			jQuery(
				"#woo_restaurant_addition_options,#woore_menubydate,#woo_restaurant_custom_data"
			)
			.on( "wrmb2_add_row wrmb2_shift_rows_complete", t )
			.on( "keyup", t ),
			(d = jQuery(
				"#woo_restaurant_addition_options,#woo_restaurant_custom_data,#woore_menubydate"
			))
			.find( ".wrmb-group-title" )
			.each(
				function () {
					var e,
					t = r( this ),
					o = t.next().find( '[id$="_name"]' ).val();
					o ||
					((o = d.find( "[data-grouptitle]" ).data( "grouptitle" )) &&
					((e = t.parents( "[data-iterator]" ).data( "iterator" )),
					(o = o.replace( "{#}", e + 1 )))),
					o && t.text( o );
				}
			),
			jQuery( '.wrmb2-id-wrsorder-store input[name="wrsorder_store"]' ).on(
				"change paste keyup",
				function (e) {
					e.preventDefault();
					e = {
						action: "woo_restaurant_admin_show_store",
						store_id: r( this ).val(),
					};
					r.ajax(
						{
							type: "post",
							url: woo_restaurant_ajax.ajaxurl,
							dataType: "json",
							data: e,
							success: function (e) {
								0 != e &&
								(r( ".wrmb2-id-wrsorder-store .wrmb2-metabox-description" ).empty(),
								r( ".wrmb2-id-wrsorder-store .wrmb2-metabox-description" ).append(
									e.store_name
								));
							},
						}
					);
				}
			),
			jQuery( 'input[name="wooresfd_sort_menu"]' ).on(
				"change",
				function () {
					var e = r( this ),
					e     = {
						action: "wooresfd_change_order_menu",
						post_id: e.attr( "data-id" ),
						value: e.val(),
					};
					r.ajax(
						{
							type: "post",
							url: woo_restaurant_ajax.ajaxurl,
							dataType: "html",
							data: e,
							success: function (e) {
									return ! 0;
							},
						}
					);
				}
			),
			jQuery( "body" ).on(
				"click",
				".woore-generatesl a",
				function () {
					var e = r( this ),
					t     = e.closest( ".wrmb-field-list" ).find( ".sltime-fr input" ).val(),
					o     = e.closest( ".wrmb-field-list" ).find( ".sltime-to input" ).val(),
					d     = e.closest( ".wrmb-field-list" ).find( ".sltime-maxod input" ).val(),
					n     = e.closest( ".wrmb-field-list" ).find( ".sltime-minu input" ).val();
					if ("" != t && "" != o) {
					}
					if ("" == n) {
						var i = e
						.closest( ".wrmb-field-list" )
						.find(
							".wrmb-type-timedelivery .wrmb-td .wrmb-tbody > .wrmb-row"
						).length,
						a     = e
						.closest( ".wrmb-field-list" )
						.find( ".wrmb-type-timedelivery .wrmb-row.hidden" )
						.prev();
						(2 == i &&
						"" == a.find( ".woore-open-time input" ).val() &&
						"" == a.find( ".woore-close-time input" ).val() &&
						"" == a.find( ".woore-max-order input" ).val()) ||
						(e
						.closest( ".wrmb-field-list" )
						.find(
							".wrmb-type-timedelivery p.wrmb-add-row button.wrmb-add-row-button"
						)
						.trigger( "click" ),
						(a    = e
						.closest( ".wrmb-field-list" )
						.find( ".wrmb-type-timedelivery .wrmb-row.hidden" )
						.prev())),
						a.find( ".woore-open-time input" ).val( t ),
						a.find( ".woore-close-time input" ).val( o ),
						a.find( ".woore-max-order input" ).val( d );
					} else if ((t = p( t )) < (o = p( o ))) {
						for (var s = t; s < o; s += +n) {
							var c  = 10 <= s % 60 ? s % 60 : "0" + (s % 60),
							l      = Math.floor( s / 60 ) + ":" + c,
							c      = 10 <= (s + +n) % 60 ? (s + +n) % 60 : "0" + ((s + +n) % 60),
							c      = Math.floor( (s + +n) / 60 ) + ":" + c,
							i      = e
								.closest( ".wrmb-field-list" )
							.find(
								".wrmb-type-timedelivery .wrmb-td .wrmb-tbody > .wrmb-row"
							).length,
								a  = e
									.closest( ".wrmb-field-list" )
									.find( ".wrmb-type-timedelivery .wrmb-row.hidden" )
									.prev();
								(2 == i &&
								"" == a.find( ".woore-open-time input" ).val() &&
								"" == a.find( ".woore-close-time input" ).val() &&
								"" == a.find( ".woore-max-order input" ).val()) ||
								(e
									.closest( ".wrmb-field-list" )
								.find(
									".wrmb-type-timedelivery p.wrmb-add-row button.wrmb-add-row-button"
								)
									.trigger( "click" ),
								(a = e
									.closest( ".wrmb-field-list" )
									.find( ".wrmb-type-timedelivery .wrmb-row.hidden" )
									.prev())),
								a.find( ".woore-open-time input" ).val( l ),
								a.find( ".woore-close-time input" ).val( c ),
								a.find( ".woore-max-order input" ).val( d );
						}
					}
				}
			),
			jQuery( ".woore-adm-odmethod select" ).on(
				"change",
				function () {
					var e,
					t,
					o = r( this ).val();
					"takeaway" == o
					? ((e = r( this ).attr( "data-ttk" )),
					(t = r( this ).attr( "data-tttk" )),
					r( ".woore-di-person" ).addClass( "wrs-hidden" ))
					: "dinein" == o
					? ((e = r( this ).attr( "data-tdin" )),
					(t = r( this ).attr( "data-ttdin" )),
					r( ".woore-di-person" ).removeClass( "wrs-hidden" ))
					: ((e = r( this ).attr( "data-tdel" )),
					(t = r( this ).attr( "data-ttdel" )),
					r( ".woore-di-person" ).addClass( "wrs-hidden" )),
					r( ".woore-adm-oddate strong" ).text( e ),
					r( ".woore-adm-odtime strong" ).text( t );
				}
			),
			jQuery( "#woore_menubydate" ).on(
				"click",
				".wrmb-add-row button",
				function (e) {
						r( this )
						.closest( ".wrmb-row" )
						.prev()
						.find( ".woores-paste-mes" )
						.css( "display", "none" ),
						r( this )
						.closest( ".wrmb-row" )
						.prev()
						.find( ".woores-paste-tt" )
						.css( "display", "block" ),
						r( this )
						.closest( ".wrmb-row" )
						.prev()
						.find( ".woores-copy" )
						.addClass( "disabled" )
						.css( "opacity", "0.5" );
				}
			),
			jQuery( "#woore_menubydate" ).on(
				"click",
				".woores-copy.disabled",
				function (e) {
						alert( r( this ).attr( "data-textdis" ) );
				}
			),
			jQuery( "#woore_menubydate" ).on(
				"click",
				".woores-copypre",
				function () {
					var e = r( this ).closest( ".wrmb-repeatable-grouping" ),
					t     = e.prev();
					e
					.find( ".woore-mnt-st .wrmb-td input" )
					.val( t.find( ".woore-mnt-ed .wrmb-td input" ).val() ),
					e
					.find( ".woore-mnt-ed .wrmb-td input" )
					.val( t.find( ".woore-mnt-ed .wrmb-td input" ).val() ),
					e
					.find( ".woore-mnt-name .wrmb-td input" )
					.val( t.find( ".woore-mnt-name .wrmb-td input" ).val() ),
					e
					.find( ".woore-mnt-max .wrmb-td input" )
					.val( t.find( ".woore-mnt-max .wrmb-td input" ).val() ),
					e
					.find( ".woore-mnt-ids .wrmb-td input" )
					.val( t.find( ".woore-mnt-ids .wrmb-td input" ).val() ),
					t
					.find( '.woore-mnt-cat .wrmb-td input[type="checkbox"]:checked' )
					.each(
						function () {
							e.find(
								'.woore-mnt-cat .wrmb-td input[value="' + r( this ).val() + '"]'
							).prop( "checked", ! 0 );
						}
					),
					t
					.find( '.woore-mnt-omt .wrmb-td input[type="checkbox"]:checked' )
					.each(
						function () {
							e.find(
								'.woore-mnt-omt .wrmb-td input[value="' + r( this ).val() + '"]'
							).prop( "checked", ! 0 );
						}
					);
				}
			),
			jQuery( "#woore_menubydate" ).on(
				"click",
				".woores-copy",
				function () {
					var e = r( "<input class='woores-ctcopy'>" ),
					t     = r( this ).closest( ".wrmb-repeatable-grouping" );
					r( "body" ).append( e ),
					e.val( t.html() ).select(),
					document.execCommand( "copy" ),
					e.remove();
				}
			),
			jQuery( "#woore_menubydate" ).on(
				"click",
				".woores-paste",
				function (e) {
					r( this ).find( ".woores-ctpaste" ).fadeIn(),
					r( this ).find( ".woores-paste-tt" ).css( "display", "block" ),
					r( this ).find( ".woores-paste-mes" ).css( "display", "none" );
				}
			),
			jQuery( "#woore_menubydate" ).length &&
			jQuery( document ).on(
				"click",
				function (e) {
					0 === r( e.target ).closest( ".woores-paste" ).length &&
					r( ".woores-ctpaste" ).fadeOut();
				}
			),
			r( "body" ).on(
				"paste",
				"#woore_menubydate .woores-ctpaste",
				function () {
					var t = r( this ),
					o     = t.closest( ".wrmb-repeatable-grouping" );
					setTimeout(
						function () {
							var e = t.val(),
							e     = r( "<div>" + e + "<div>" );
							o
							.find( ".woore-mnt-st .wrmb-td input" )
							.val( e.find( ".woore-mnt-ed .wrmb-td input" ).val() ),
							o
							.find( ".woore-mnt-ed .wrmb-td input" )
							.val( e.find( ".woore-mnt-ed .wrmb-td input" ).val() ),
							o
							.find( ".woore-mnt-name .wrmb-td input" )
							.val( e.find( ".woore-mnt-name .wrmb-td input" ).val() ),
							o
							.find( ".woore-mnt-max .wrmb-td input" )
							.val( e.find( ".woore-mnt-max .wrmb-td input" ).val() ),
							o
							.find( ".woore-mnt-ids .wrmb-td input" )
							.val( e.find( ".woore-mnt-ids .wrmb-td input" ).val() ),
							e
							.find( '.woore-mnt-cat .wrmb-td input[type="checkbox"]:checked' )
							.each(
								function () {
									o.find(
										'.woore-mnt-cat .wrmb-td input[value="' + r( this ).val() + '"]'
									).prop( "checked", ! 0 );
								}
							),
							e
							.find( '.woore-mnt-omt .wrmb-td input[type="checkbox"]:checked' )
							.each(
								function () {
									o.find(
										'.woore-mnt-omt .wrmb-td input[value="' + r( this ).val() + '"]'
									).prop( "checked", ! 0 );
								}
							),
							t
							.closest( ".woores-paste" )
							.find( ".woores-paste-tt" )
							.css( "display", "none" ),
							t
							.closest( ".woores-paste" )
							.find( ".woores-paste-mes" )
							.css( "display", "block" ),
							t.val( "" ).fadeOut();
						},
						100
					);
				}
			),
			jQuery( "body" ).on(
				"click",
				".woore-disable-slot input.checkbox-dis",
				function () {
						this.checked ? r( this ).next().val( "1" ) : r( this ).next().val( "" );
				}
			);
		}
	);
})( jQuery );

// jQuery(document).ready(function($) {
// if ( $("#woo_restaurant_store_close").is(':checked') ) {
// $('#woo_restaurant_options_page').append('<input id="otter_pause_the_api" type="hidden" name="action" value="otter_pause_the_api" />');
// } else {
// $('#otter_pause_the_api').val( 'otter_unpause_the_api' );
// }
// $("#woo_restaurant_store_close").click(function() {
// if ( $(this).is(':checked') ) {
// $('#otter_pause_the_api').remove();
// $('#woo_restaurant_options_page').append('<input type="hidden" name="action" id="otter_pause_the_api" value="otter_pause_the_api" />');
// } else {
// $('#otter_pause_the_api').val( 'otter_unpause_the_api' );
// }
// });
// });.
